# Использование RetroShare в связке с Yggdrasil в системе Windows
RetroShare устанавливает зашифрованные соединения между вами и вашими друзьями для создания сети компьютеров, а поверх нее предоставляет различные распределенные сервисы: форумы, каналы, чат, почту. RetroShare полностью децентрализован и предназначен для обеспечения максимальной безопасности и анонимности для его пользователи помимо прямых друзей. 
RetroShare — это полностью бесплатное программное обеспечение с открытым исходным кодом. 
Он доступен на Android, Linux, MacOS и Windows. Никаких скрытых платежей, рекламы и условий обслуживания.
  
Yggdrasil - децентрализованная самоорганизующаяся сеть с шифрованием, построенная поверх Интернета. При подключении к сети, каждому клиенту выделяется уникальный IPv6-адрес, по которому к данном клиенту могут подключаться другие клиенты сети Yggdrasil. В свою очередь Yggdrasil позволяет соединяться разным узлам напрямую, без препятствий в виде провайдерского NAT, что в данное время (поскольку до сих пор IPv6 не обрёл массовость) очень даже актуально.

## Установка и настройка Yggdrasil
1. Переходим на официальный сайт с релизами [(ссылка)](https://github.com/yggdrasil-network/yggdrasil-go/releases)
2. Выбираем и качаем установщик под нужную платформу, в случае Windows это должен быть файл `yggdrasil-x.x.x-x64.msi`
Цифры версии могут варьироваться, но в данном случае это не имеет никакого значения.
3. Устанавливаем его. Установщик будет немногословен, возможно вы даже не увидите никаких вспывающих окон.
Но если все прошло нормально, в службах Windows должен появиться Yggdrasil (список служб можно увидеть в диспетчере задач)
4. Далее, для Yggdrasil нужно настроить список публичных пиров. Именно через них будет проходить весь трафик сети, конечно же
в зашифрованном виде. Тут есть два варианта: вы можете сами выбрать список пиров, наиболее подходящий 
для вас, по [этому адресу](https://github.com/yggdrasil-network/public-peers). Или же воспользоваться списком, приведённым в этом гайде.
Список пиров находится в конфигурационном файле Yggdrasil. Чтобы открыть его, откройте у себя любую папку, и в адресную строку проводника введите `%ALLUSERSPROFILE%\Yggdrasil\yggdrasil.conf` и нажмите Enter. Должен открыться конфигурационный файл.

Вы увидите пустой список пиров:
```
Peers: []
```

В заполненном виде он должен выглядеть как-то так:
```
Peers:
[
  tcp://a.b.c.d:e
  tcp://d.c.b.a:e
  tcp://[a:b:c::d]:e
  tcp://[d:c:b::a]:e
]
```

Вы можете заполнить этот список сами, по вышеуказанной ссылке, или просто вставить этот готовый список:
```
  Peers: [
	tcp://yggby.ddns.net:7991
	tls://yggby.ddns.net:7992
	tcp://[2804:49fc::ffff:ffff:5b5:e8be]:58301
	tcp://45.231.133.188:58301
	tls://192.99.145.61:58226
	tls://[2607:5300:201:3100::50a1]:58226
	tls://ca1.servers.devices.cwinfo.net:58226
	tcp://kusoneko.moe:9002
	tcp://[2a05:9403::8b]:7743
	tcp://195.123.245.146:7743
	tls://217.195.164.4:10531
	tls://65.21.57.122:61995
	tls://[2a01:4f9:c010:664d::1]:61995
	tls://95.216.5.243:18836
	tls://[2a01:4f9:2a:60c::2]:18836
	tls://fi1.servers.devices.cwinfo.net:61995
	tls://aurora.devices.waren.io:18836
	tcp://ygg-fin.incognet.io:8883
	tls://ygg-fin.incognet.io:8884
	tcp://62.210.85.80:39565
	tcp://[2001:470:1f13:e56::64]:39565
	tls://[2001:41d0:304:200::ace3]:23108
	tls://[2001:41d0:2:c44a:51:255:223:60]:54232
	tls://152.228.216.112:23108
	tcp://51.15.204.214:12345
	tls://51.15.204.214:54321
	tls://62.210.85.80:39575
	tls://51.255.223.60:54232
	tls://[2001:470:1f13:e56::64]:39575
	tls://fr2.servers.devices.cwinfo.net:23108
	tls://s2.i2pd.xyz:39575
	tcp://s2.i2pd.xyz:39565
	tls://cloudberry.fr1.servers.devices.cwinfo.net:54232
	tcp://130.61.94.233:13338
	tcp://phrl42.ydns.eu:8842
	tcp://94.130.203.208:5999
	tcp://ygg.mkg20001.io:80
	tls://ygg.mkg20001.io:443
	tls://01.ffm.deu.ygg.yt:443
	tcp://01.ffm.deu.ygg.yt:80
	tcp://bunkertreff.ddns.net:5454
	tcp://45.138.172.192:5001
	tcp://ygg.cofob.ru:80
	tls://45.138.172.192:5002
	tls://ygg.cofob.ru:443
	tls://01.rkv.isl.ygg.yt:443
	tcp://01.rkv.isl.ygg.yt:80
	tcp://01.blr.ind.ygg.yt:80
	tls://01.blr.ind.ygg.yt:443
	tcp://01.tky.jpn.ygg.yt:80
	tls://01.tky.jpn.ygg.yt:443
	tls://minecast.xyz:3785
	tcp://yes.loki:5000
	tcp://jeff.loki:5000
	tcp://104.244.79.104:58935
	tcp://ygg-lux.incognet.io:8883
	tls://ygg-lux.incognet.io:8884
	tcp://01.mxc.mex.ygg.yt:80
	tls://01.mxc.mex.ygg.yt:443
	tcp://51.15.118.10:62486
	tcp://[2001:bc8:1820:192f::1]:62486
	tls://ygg1.ezdomain.ru:11130
	tls://45.147.198.155:6010
	tcp://ygg1.ezdomain.ru:11129
	tls://ygg-nl.incognet.io:8884
	tcp://ygg-nl.incognet.io:8883
	tls://94.103.82.150:8080
	tcp://01.hrl.nld.ygg.yt:80
	tls://01.hrl.nld.ygg.yt:443
	tls://77.249.167.165:8084
	tcp://ams1.y.sota.sh:8080
	tcp://yggdrasil.frank2.net:1337
	tls://[2001:41d0:601:1100::cf2]:11129
	tls://54.37.137.221:11129
	tls://pl1.servers.devices.cwinfo.net:11129
	tcp://185.165.169.234:8880
	tls://185.165.169.234:8443
	tls://188.225.9.167:18227
	tls://yggno.de:18227
	tls://ygg.tomasgl.ru:61944?key=c5e0c28a600c2118e986196a0bbcbda4934d8e9278ceabea48838dc5d8fae576
	tcp://ygg.tomasgl.ru:61933?key=c5e0c28a600c2118e986196a0bbcbda4934d8e9278ceabea48838dc5d8fae576
	tcp://kazi.peer.cofob.ru:18000
	tcp://srv.itrus.su:7991
	tcp://box.paulll.cc:13337
	tls://box.paulll.cc:13338
	tls://yggpvs.duckdns.org:8443
	tcp://188.225.9.167:18226
	tcp://yggno.de:18226
	tls://[2a01:d0:ffff:4353::2]:6010
	tls://kazi.peer.cofob.ru:18001
	tcp://ygg0.ezdomain.ru:11129
	tls://ygg0.ezdomain.ru:11130
	tcp://95.165.99.73:5353
	tcp://92.124.136.131:30111
	tcp://ygg.loskiq.dev:17313
	tls://ygg.loskiq.dev:17314
	tcp://irk.peering.flying-squid.host:8080?key=f69da2c11d5fe8bcee7d026a6ed28dc7873db9ecb88c797b29348546e411d934
	tls://irk.peering.flying-squid.host:8443?key=f69da2c11d5fe8bcee7d026a6ed28dc7873db9ecb88c797b29348546e411d934
	tls://cluster.h3xco.de:7040
	tcp://itcom.multed.com:7991
	tcp://188.120.228.75:7991
	tcp://toki.peer.cofob.ru:80
	tls://185.22.60.71:8443
	tls://188.120.228.75:7992
	tls://toki.peer.cofob.ru:443
	tcp://ekb.itrus.su:7991
	tcp://ygg.legalloli.net:28001
	tls://ygg.legalloli.net:28002
	tls://[2603:c023:8001:1600:35e0:acde:2c6e:b27f]:17001
	tls://[2603:c023:8001:1600:1::]:17001
	tls://150.230.51.87:17001
	tls://[2603:c023:8001:1600::1:3]:17001
	tcp://01.sgp.sgp.ygg.yt:80
	tls://01.sgp.sgp.ygg.yt:443
	tcp://y.zbin.eu:7743
	tcp://[2a04:5b81:2010::90]:2000
	tcp://01.sel.kor.ygg.yt:80
	tls://01.sel.kor.ygg.yt:443
	tls://ygg.ace.ctrl-c.liu.se:9999?key=5636b3af4738c3998284c4805d91209cab38921159c66a6f359f3f692af1c908
	tcp://ygg.ace.ctrl-c.liu.se:9998?key=5636b3af4738c3998284c4805d91209cab38921159c66a6f359f3f692af1c908
	tls://[2a07:e01:105:444:c634:6bff:feb5:6e28]:7040
	tls://185.130.44.194:7040
	tcp://ygg-ukr.incognet.io:8883
	tls://ygg-ukr.incognet.io:8884
	tcp://193.111.114.28:8080
	tls://193.111.114.28:1443
	tls://91.224.254.114:18001
	tcp://78.27.153.163:33165
	tls://78.27.153.163:179
	tls://78.27.153.163:33166
	tls://78.27.153.163:3784
	tls://78.27.153.163:3785
	tls://51.38.64.12:28395
	tls://185.175.90.87:43006
	tls://[2a10:4740:40:0:2222:3f9c:b7cf:1]:43006
	tls://[2001:41d0:801:2000::233f]:28395
	tls://uk1.servers.devices.cwinfo.net:28395
	tcp://curiosity.tdjs.tech:30003
	tcp://01.lon.gbr.ygg.yt:80
	tls://01.lon.gbr.ygg.yt:443
	tcp://50.236.201.218:56088
	tls://108.175.10.127:61216
	tcp://longseason.1200bps.xyz:13121
	tls://longseason.1200bps.xyz:13122
	tls://167.160.89.98:7040
	tls://[2605:9f80:2000:64::2]:7040
	tls://bazari.sh:3725
	tcp://ygg-ny-us.incognet.io:8883
	tls://supergay.network:9001
	tls://ygg-ny-us.incognet.io:8884
	tcp://ygg-tx-us.incognet.io:8883
	tls://ygg-tx-us.incognet.io:8884
	tcp://lancis.iscute.moe:49273
	tls://lancis.iscute.moe:49274
	tcp://51.81.46.170:5000
	tcp://[2001:470:e08f:2:216:3eff:fe8f:264f]:13121
	tls://[2001:470:e08f:2:216:3eff:fe8f:264f]:13122
	tcp://01.scv.usa.ygg.yt:80
	tls://01.scv.usa.ygg.yt:443
	tcp://ygg-nv-us.incognet.io:8883
	tls://ygg-nv-us.incognet.io:8884
	tcp://[2607:f1c0:1801:d4::1]:61216
  ]
```

5. Далее, после того как список публичных пиров заполнен, нужно перезапустить службу Yggdrasil: 
`Диспетчер задач` -> `Службы `-> `Yggdrasil` -> правая кнопка мыши, `Перезапустить`
6. После этого, необходимо проверить, что всё прошло успешно. Для этого можно попытаться открыть в браузере
официальный сайт Yggdrasil внутри сети Yggdrasil, адрес `http://[319:3cf0:dd1d:47b9:20c:29ff:fe2c:39be]/`
Если сайт открылся, значит Yggdrasil успешно настроен и функционирует, и можно переходить к следующей стадии.

## Установка и настройка RetroShare
1. Скачиваем RetroShare для нужной платформы на [официальном сайте](https://retroshare.cc/downloads.html).
Если хотите, чтобы программа не оставляла лишних следов в вашей операционной системе, то имеет смысл
выбрать Portable версию программы. Она не требует установки, можно распаковать в любом месте и использовать.
В дальнейшем в инструкции будет упомянаться именно Portable версия программы.
2. Распаковываем архив в любое удобное для вас место на диске. Запускаем файл `retroshare.exe`
3. Теперь нужно создать аккаунт. Введите имя пользователя и пароль. Очень советую где-то отдельно записать пароль
и не забывать его, потому что при утере пароля доступ к аккаунту будет безвозвратно утерян, без возможности востановления. Такова плата за децентрализацию.
4. Далее нужно поводить мышкой по экрану до момента, пока не заполнится шкала снизу окна. Это необходимо
для обеспечения энтропии, нужной для устойчивого и надежного шифрования.
5. После чего нужно нажать кнопку для создания аккаунта. После чего откроется главное окно RetroShare.
Скорее всего у вас появится окно браундмауэра с запросом на разрешение доступа к сети для RetroShare, в нём нужно разрешить доступ.

## Настройка брандмауэра
Для успешной работы RetroShare необходима правильная настройка браундмауэра, который может стать дополнительным препятствием при подключении клиентов сети друг к другу.
1. Откройте диспетчер задач, в верхнем левом углу выберите `Файл` -> `Запустить новую задачу`.
2. В открывшемся окне введите `wf.msc` и нажмите Enter.
3. Откроется окно с правилами брандмауэра. В списке слева выберите `Правила для входящих подключений`.
4. Найдите там 2 правила для RetroShare. Выберите одно и них, нажмите ПКМ и откройте свойства.
(написать про параметр разрешить запретить).
5. В открывшемся окне, в пункте `Действие` выберите вариант `Разрешить подключение`, если он не выбран.
6. Далее, в окне свойств выберите вкладку `Дополнительно`, в ней найдите пункт `Профили`.
7. В пункте `Профили` выберите все три галочки, нажмите `Применить` и закройте свойства.
8. Эти действия нужно повторить и для второго правила RetroShare в брандмауэре.
9. На данном этапе, настройка брандмауэра завершена.

## Установление связи с другим пользователем через RetroShare
1. Узнайте у вашего собеседника его персональный ID, который отображается на домашней странице RetroShare.
2. На домашней странице RetroShare, нажмите кнопку `Add Friend`, и в открывшееся поле вставьте ID собеседника. Затем нажмите `Next`, и после этого нажмите `Finish`.
3. Должен начаться процесс подключения, который займёт некоторое время. Если он сразу завершился удачно (а так бывает не всегда), то вы можете остановиться на этом шаге и без проблем использовать RetroShare.
4. Если же процесс подключения завершился неудачно, то нужно полностью закрыть программу RetroShare и запустить её заново.
5. После этого ваш собеседник должен появиться во вкладке `Network`, в статусе онлайн.
6. Теперь можно пользоваться всеми функциями RetroShare в полной мере.
